{"version":3,"sources":["pages/Home.js","pages/Login.js","pages/Register.js","pages/Games.js","socket.js","pages/Chat.js","pages/Game.js","App.js","index.js"],"names":["Home","_jsxs","children","_jsx","Login","email","setEmail","useState","password","setPassword","error","setError","onSubmit","async","e","preventDefault","response","axios","post","concat","process","console","log","data","type","placeholder","value","onChange","target","Register","username","setUsername","Games","games","setGames","API_URL","useEffect","token","localStorage","getItem","get","headers","fetchGames","map","game","player1","player2","result","_id","socket","io","autoConnect","query","on","Chat","_ref","gameId","messages","setMessages","message","setMessage","emit","prevMessages","off","List","msg","index","ListItem","ListItemText","primary","text","TextField","fullWidth","margin","Button","variant","color","Game","useParams","setGame","Chess","connect","move","newGame","fen","disconnect","savedGame","boardState","fetchGame","Chessboard","position","onPieceDrop","sourceSquare","targetSquare","handleMove","from","to","promotion","in_checkmate","turn","in_draw","handleResult","App","Router","basename","Routes","Route","path","element","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.630a6cc4.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div>\r\n      <h1>FESACHESS</h1>\r\n      <p>Welcome to FESACHESS, the online chess game.</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/auth/login`, {\r\n        email,\r\n        password\r\n      });\r\n      // Manejar la respuesta\r\n      console.log(response.data);\r\n    } catch (error) {\r\n      setError('Invalid credentials');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Login</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button type=\"submit\">Login</button>\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Register = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post(`${API_URL}/api/auth/register`, {\r\n        username,\r\n        email,\r\n        password\r\n      });\r\n      // Manejar la respuesta\r\n      console.log(response.data);\r\n    } catch (error) {\r\n      setError('Error registering user');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Register</h1>\r\n      <form onSubmit={handleSubmit}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Username\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"email\"\r\n          placeholder=\"Email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n        />\r\n        <input\r\n          type=\"password\"\r\n          placeholder=\"Password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n        />\r\n        <button type=\"submit\">Register</button>\r\n        {error && <p>{error}</p>}\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\n\r\nconst Games = () => {\r\n  const [games, setGames] = useState([]);\r\n  const [error, setError] = useState('');\r\n\r\n  const API_URL = process.env.REACT_APP_API_URL;\r\n\r\n  useEffect(() => {\r\n    const fetchGames = async () => {\r\n      try {\r\n        const token = localStorage.getItem('token');\r\n        const response = await axios.get(`${API_URL}/api/games/mygames`, {\r\n          headers: { 'x-auth-token': token }\r\n        });\r\n        setGames(response.data);\r\n      } catch (error) {\r\n        setError('Error fetching games');\r\n      }\r\n    };\r\n\r\n    fetchGames();\r\n  }, [API_URL]);\r\n\r\n  return (\r\n    <div>\r\n      <h1>My Games</h1>\r\n      {error && <p>{error}</p>}\r\n      <ul>\r\n        {games.map((game) => (\r\n          <li key={game._id}>\r\n            Game between {game.player1} and {game.player2} - Result: {game.result}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Games;\r\n","import { io } from 'socket.io-client';\r\n\r\nconst SOCKET_URL = 'http://localhost:5000'; // AsegÃºrate de que el puerto coincida con el backend\r\n\r\nconst token = localStorage.getItem('token');\r\n\r\nexport const socket = io(SOCKET_URL, {\r\n  autoConnect: false,\r\n  query: { token },\r\n});\r\n\r\nsocket.on('connect', () => {\r\n  console.log('Connected to socket.io server');\r\n});\r\n\r\nsocket.on('disconnect', () => {\r\n  console.log('Disconnected from socket.io server');\r\n});\r\n","import React, { useState, useEffect } from 'react';\r\nimport { socket } from '../socket';\r\nimport { TextField, Button, List, ListItem, ListItemText } from '@mui/material';\r\n\r\nconst Chat = ({ gameId }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    socket.emit('joinGame', gameId);\r\n\r\n    socket.on('message', (message) => {\r\n      setMessages((prevMessages) => [...prevMessages, message]);\r\n    });\r\n\r\n    return () => {\r\n      socket.emit('leaveGame', gameId);\r\n      socket.off('message');\r\n    };\r\n  }, [gameId]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    socket.emit('sendMessage', { gameId, text: message });\r\n    setMessage('');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <List>\r\n        {messages.map((msg, index) => (\r\n          <ListItem key={index}>\r\n            <ListItemText primary={msg.text} />\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <form onSubmit={sendMessage}>\r\n        <TextField\r\n          type=\"text\"\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n          Send\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Chessboard } from 'react-chessboard';\r\nimport { Chess } from 'chess.js';\r\nimport { socket } from '../socket';\r\nimport { useParams } from 'react-router-dom';\r\nimport Chat from './Chat';\r\nimport axios from 'axios';\r\n\r\nconst Game = () => {\r\n  const { gameId } = useParams();\r\n  const [game, setGame] = useState(new Chess());\r\n\r\n  useEffect(() => {\r\n    socket.connect();\r\n\r\n    socket.on('move', (move) => {\r\n      const newGame = new Chess(game.fen());\r\n      newGame.move(move);\r\n      setGame(newGame);\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [game]);\r\n\r\n  useEffect(() => {\r\n    const fetchGame = async () => {\r\n      const response = await axios.get(`https://tfg-back.onrender.com/api/games/${gameId}`);\r\n      const savedGame = new Chess(response.data.boardState);\r\n      setGame(savedGame);\r\n    };\r\n\r\n    fetchGame();\r\n  }, [gameId]);\r\n\r\n  const handleResult = (game) => {\r\n    if (game.in_checkmate()) {\r\n      if (game.turn() === 'b') {\r\n        // Player 1 (white) wins\r\n        return 'player1';\r\n      } else {\r\n        // Player 2 (black) wins\r\n        return 'player2';\r\n      }\r\n    } else if (game.in_draw()) {\r\n      return 'draw';\r\n    }\r\n    return 'ongoing';\r\n  };\r\n\r\n  const handleMove = (sourceSquare, targetSquare) => {\r\n    const newGame = new Chess(game.fen());\r\n    const move = newGame.move({\r\n      from: sourceSquare,\r\n      to: targetSquare,\r\n      promotion: 'q',\r\n    });\r\n    if (move === null) return;\r\n\r\n    const result = handleResult(newGame);\r\n    setGame(newGame);\r\n    socket.emit('move', { gameId, move, fen: newGame.fen(), turn: newGame.turn(), result });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Game</h1>\r\n      <Chessboard\r\n        position={game.fen()}\r\n        onPieceDrop={(sourceSquare, targetSquare) => handleMove(sourceSquare, targetSquare)}\r\n      />\r\n      <Chat gameId={gameId} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","import React from 'react';\nimport { HashRouter as Router, Route, Routes } from 'react-router-dom';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Games from './pages/Games';\nimport Game from './pages/Game';\n\nfunction App() {\n  return (\n    <Router basename=\"/\">\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route path=\"/games\" element={<Games />} />\n        <Route path=\"/game\" element={<Game />} />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}
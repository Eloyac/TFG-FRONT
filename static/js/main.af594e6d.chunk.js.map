{"version":3,"sources":["pages/Home.js","pages/Login.js","pages/Register.js","socket.js","pages/Chat.js","pages/Game.js","pages/Games.js","components/ProtectedRoute.js","App.js","index.js"],"names":["Home","_jsxs","children","_jsx","Login","email","setEmail","useState","password","setPassword","error","setError","navigate","useNavigate","Container","maxWidth","Typography","variant","component","gutterBottom","onSubmit","async","e","preventDefault","response","axios","post","localStorage","setItem","data","token","TextField","label","type","value","onChange","target","fullWidth","margin","required","Button","color","Register","username","setUsername","getItem","socket","io","autoConnect","query","on","console","log","Chat","_ref","gameId","messages","setMessages","message","setMessage","useEffect","emit","prevMessages","off","List","map","msg","index","ListItem","ListItemText","primary","text","Game","useParams","game","setGame","Chess","connect","move","newGame","fen","disconnect","get","concat","savedGame","boardState","fetchGame","Chessboard","position","onPieceDrop","sourceSquare","targetSquare","handleMove","from","to","promotion","result","in_checkmate","turn","in_draw","handleResult","Games","games","setGames","headers","fetchGames","onClick","player2Id","handleJoinGame","_id","player1","player2","ProtectedRoute","Navigate","App","Router","Routes","Route","path","element","ReactDOM","render","React","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.af594e6d.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Home = () => {\r\n  return (\r\n    <div>\r\n      <h1>FESACHESS</h1>\r\n      <p>Welcome to FESACHESS, the online chess game.</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button, TextField, Container, Typography } from '@mui/material';\r\n\r\nconst Login = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/auth/login', { email, password });\r\n      localStorage.setItem('token', response.data.token);\r\n      navigate('/games');\r\n    } catch (error) {\r\n      setError('Invalid credentials');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n        Login\r\n      </Typography>\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Email\"\r\n          type=\"email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          required\r\n        />\r\n        <TextField\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          required\r\n        />\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n          Login\r\n        </Button>\r\n      </form>\r\n      {error && <Typography color=\"error\">{error}</Typography>}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { Button, TextField, Container, Typography } from '@mui/material';\r\n\r\nconst Register = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState('');\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      await axios.post('http://localhost:5000/api/auth/register', { username, email, password });\r\n      navigate('/login');\r\n    } catch (error) {\r\n      setError('Registration failed');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Container maxWidth=\"sm\">\r\n      <Typography variant=\"h4\" component=\"h1\" gutterBottom>\r\n        Register\r\n      </Typography>\r\n      <form onSubmit={handleSubmit}>\r\n        <TextField\r\n          label=\"Username\"\r\n          type=\"text\"\r\n          value={username}\r\n          onChange={(e) => setUsername(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          required\r\n        />\r\n        <TextField\r\n          label=\"Email\"\r\n          type=\"email\"\r\n          value={email}\r\n          onChange={(e) => setEmail(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          required\r\n        />\r\n        <TextField\r\n          label=\"Password\"\r\n          type=\"password\"\r\n          value={password}\r\n          onChange={(e) => setPassword(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n          required\r\n        />\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\" fullWidth>\r\n          Register\r\n        </Button>\r\n      </form>\r\n      {error && <Typography color=\"error\">{error}</Typography>}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import { io } from 'socket.io-client';\r\n\r\nconst SOCKET_URL = 'http://localhost:5000'; // Asegúrate de que el puerto coincida con el backend\r\n\r\nconst token = localStorage.getItem('token');\r\n\r\nexport const socket = io(SOCKET_URL, {\r\n  autoConnect: false,\r\n  query: { token },\r\n});\r\n\r\nsocket.on('connect', () => {\r\n  console.log('Connected to socket.io server');\r\n});\r\n\r\nsocket.on('disconnect', () => {\r\n  console.log('Disconnected from socket.io server');\r\n});\r\n","import React, { useState, useEffect } from 'react';\r\nimport { socket } from '../socket';\r\nimport { TextField, Button, List, ListItem, ListItemText } from '@mui/material';\r\n\r\nconst Chat = ({ gameId }) => {\r\n  const [messages, setMessages] = useState([]);\r\n  const [message, setMessage] = useState('');\r\n\r\n  useEffect(() => {\r\n    socket.emit('joinGame', gameId);\r\n\r\n    socket.on('message', (message) => {\r\n      setMessages((prevMessages) => [...prevMessages, message]);\r\n    });\r\n\r\n    return () => {\r\n      socket.emit('leaveGame', gameId);\r\n      socket.off('message');\r\n    };\r\n  }, [gameId]);\r\n\r\n  const sendMessage = (e) => {\r\n    e.preventDefault();\r\n    socket.emit('sendMessage', { gameId, text: message });\r\n    setMessage('');\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <List>\r\n        {messages.map((msg, index) => (\r\n          <ListItem key={index}>\r\n            <ListItemText primary={msg.text} />\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <form onSubmit={sendMessage}>\r\n        <TextField\r\n          type=\"text\"\r\n          value={message}\r\n          onChange={(e) => setMessage(e.target.value)}\r\n          fullWidth\r\n          margin=\"normal\"\r\n        />\r\n        <Button type=\"submit\" variant=\"contained\" color=\"primary\">\r\n          Send\r\n        </Button>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Chessboard } from 'react-chessboard';\r\nimport { Chess } from 'chess.js';\r\nimport { socket } from '../socket';\r\nimport { useParams } from 'react-router-dom';\r\nimport Chat from './Chat';\r\nimport axios from 'axios';\r\n\r\nconst Game = () => {\r\n  const { gameId } = useParams();\r\n  const [game, setGame] = useState(new Chess());\r\n\r\n  useEffect(() => {\r\n    socket.connect();\r\n\r\n    socket.on('move', (move) => {\r\n      const newGame = new Chess(game.fen());\r\n      newGame.move(move);\r\n      setGame(newGame);\r\n    });\r\n\r\n    return () => {\r\n      socket.disconnect();\r\n    };\r\n  }, [game]);\r\n\r\n  useEffect(() => {\r\n    const fetchGame = async () => {\r\n      const response = await axios.get(`http://localhost:5000/api/games/${gameId}`);\r\n      const savedGame = new Chess(response.data.boardState);\r\n      setGame(savedGame);\r\n    };\r\n\r\n    fetchGame();\r\n  }, [gameId]);\r\n\r\n  const handleResult = (game) => {\r\n    if (game.in_checkmate()) {\r\n      if (game.turn() === 'b') {\r\n        // Player 1 (white) wins\r\n        return 'player1';\r\n      } else {\r\n        // Player 2 (black) wins\r\n        return 'player2';\r\n      }\r\n    } else if (game.in_draw()) {\r\n      return 'draw';\r\n    }\r\n    return 'ongoing';\r\n  };\r\n\r\n  const handleMove = (sourceSquare, targetSquare) => {\r\n    const newGame = new Chess(game.fen());\r\n    const move = newGame.move({\r\n      from: sourceSquare,\r\n      to: targetSquare,\r\n      promotion: 'q',\r\n    });\r\n    if (move === null) return;\r\n\r\n    const result = handleResult(newGame);\r\n    setGame(newGame);\r\n    socket.emit('move', { gameId, move, fen: newGame.fen(), turn: newGame.turn(), result });\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Game</h1>\r\n      <Chessboard\r\n        position={game.fen()}\r\n        onPieceDrop={(sourceSquare, targetSquare) => handleMove(sourceSquare, targetSquare)}\r\n      />\r\n      <Chat gameId={gameId} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Game;\r\n","import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { useNavigate } from 'react-router-dom';\r\n\r\nconst Games = () => {\r\n  const [games, setGames] = useState([]);\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    const fetchGames = async () => {\r\n      const token = localStorage.getItem('token');\r\n      const response = await axios.get('http://localhost:5000/api/games/mygames', {\r\n        headers: { 'x-auth-token': token },\r\n      });\r\n      setGames(response.data);\r\n    };\r\n\r\n    fetchGames();\r\n  }, []);\r\n\r\n  const handleCreateGame = async () => {\r\n    const token = localStorage.getItem('token');\r\n    const response = await axios.post(\r\n      'http://localhost:5000/api/games/create',\r\n      { player2Id: 'some-player2-id' }, // Reemplaza con la lógica para seleccionar el oponente\r\n      {\r\n        headers: { 'x-auth-token': token },\r\n      }\r\n    );\r\n    setGames([...games, response.data]);\r\n  };\r\n\r\n  const handleJoinGame = (gameId) => {\r\n    navigate(`/game/${gameId}`);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h1>Games</h1>\r\n      <button onClick={handleCreateGame}>Create Game</button>\r\n      <ul>\r\n        {games.map((game) => (\r\n          <li key={game._id} onClick={() => handleJoinGame(game._id)}>\r\n            Game between {game.player1} and {game.player2}\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Games;\r\n","import React from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  const token = localStorage.getItem('token');\r\n  return token ? children : <Navigate to=\"/login\" />;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n","import React from 'react';\nimport { BrowserRouter as Router, Route, Routes } from 'react-router-dom';\nimport Home from './pages/Home';\nimport Login from './pages/Login';\nimport Register from './pages/Register';\nimport Game from './pages/Game';\nimport Games from './pages/Games';\nimport ProtectedRoute from './components/ProtectedRoute';\n\nfunction App() {\n  return (\n    <Router>\n      <Routes>\n        <Route path=\"/\" element={<Home />} />\n        <Route path=\"/login\" element={<Login />} />\n        <Route path=\"/register\" element={<Register />} />\n        <Route\n          path=\"/games\"\n          element={\n            <ProtectedRoute>\n              <Games />\n            </ProtectedRoute>\n          }\n        />\n        <Route\n          path=\"/game/:gameId\"\n          element={\n            <ProtectedRoute>\n              <Game />\n            </ProtectedRoute>\n          }\n        />\n      </Routes>\n    </Router>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}